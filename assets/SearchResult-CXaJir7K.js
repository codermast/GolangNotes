import{u as Y,f as te,g as ae,h as z,i as le,P as re,t as ne,j as oe,k as _,l as x,m as se,n as B,p as a,q as ce,R as T,s as ie,v as ue,x as ge,C as de,y as me,z as he,A as ve,B as ye,D as pe,E as q,F as be,G as ke,H as fe,I as $,J as I,K as we}from"./app-Csyz1R7U.js";const He=["/","/backend-tech/","/golang/","/backend-tech/general/","/golang/community/","/golang/core/","/golang/web/","/backend-tech/general/git/git-basic-operations.html","/backend-tech/general/git/git-branch-manage.html","/backend-tech/general/git/git-content-operations.html","/backend-tech/general/git/git-introduce-install.html","/backend-tech/general/git/git-remote-manage.html","/backend-tech/general/git/git-workspace-index-repo.html","/backend-tech/general/git/","/backend-tech/cloud-native/docker/docker-basic.html","/backend-tech/cloud-native/docker/docker-compose.html","/backend-tech/cloud-native/docker/docker-container-connection.html","/backend-tech/cloud-native/docker/docker-dockerfile.html","/backend-tech/cloud-native/docker/docker-introduce.html","/backend-tech/cloud-native/docker/docker-object.html","/backend-tech/cloud-native/docker/docker-quickstart.html","/backend-tech/cloud-native/docker/docker-volumes.html","/backend-tech/cloud-native/docker/docker-warehouse.html","/backend-tech/cloud-native/docker/docker-web-containers.html","/backend-tech/cloud-native/docker/","/golang/community/open-library/","/golang/community/open-library/golang.org-x-crypto-ssh.html","/golang/community/standard-library/","/golang/community/standard-library/bufio.html","/golang/community/standard-library/container.html","/golang/community/standard-library/crypto.html","/golang/community/standard-library/encoding_csv.html","/golang/community/standard-library/encoding_json.html","/golang/community/standard-library/encoding_xml.html","/golang/community/standard-library/flag.html","/golang/community/standard-library/fmt.html","/golang/community/standard-library/http.html","/golang/community/standard-library/io.html","/golang/community/standard-library/log.html","/golang/community/standard-library/math.html","/golang/community/standard-library/net.html","/golang/community/standard-library/os.html","/golang/community/standard-library/sort.html","/golang/community/standard-library/strconv.html","/golang/community/standard-library/time.html","/golang/core/basic/array-slice.html","/golang/core/basic/background-introdece.html","/golang/core/basic/environment-config.html","/golang/core/basic/error.html","/golang/core/basic/function.html","/golang/core/basic/generic.html","/golang/core/basic/interface.html","/golang/core/basic/logic-statement.html","/golang/core/basic/map.html","/golang/core/basic/operator-symbol.html","/golang/core/basic/pointer.html","/golang/core/basic/","/golang/core/basic/struct.html","/golang/core/basic/variable-datatype.html","/golang/core/concurrent/Concurrent-security-race-conditions.html","/golang/core/concurrent/channel.html","/golang/core/concurrent/concurrent-model.html","/golang/core/concurrent/context.html","/golang/core/concurrent/goroutine.html","/golang/core/concurrent/memory-model.html","/golang/core/concurrent/","/golang/core/concurrent/select.html","/golang/core/concurrent/synchronization-primitives.html","/golang/core/network/","/golang/web/gin/introduce.html","/golang/web/gin/middleware.html","/golang/web/gin/","/golang/web/gin/request-parameter.html","/golang/web/gin/response.html","/golang/web/gin/router.html","/golang/web/gin/session.html","/golang/web/gin/template-draw.html","/404.html","/backend-tech/cloud-native/"],Re="SEARCH_PRO_QUERY_HISTORY",p=Y(Re,[]),xe=()=>{const{queryHistoryCount:l}=q,r=l>0;return{enabled:r,queryHistory:p,addQueryHistory:n=>{r&&(p.value=Array.from(new Set([n,...p.value.slice(0,l-1)])))},removeQueryHistory:n=>{p.value=[...p.value.slice(0,n),...p.value.slice(n+1)]}}},j=l=>He[l.id]+("anchor"in l?`#${l.anchor}`:""),qe="SEARCH_PRO_RESULT_HISTORY",{resultHistoryCount:U}=q,b=Y(qe,[]),Qe=()=>{const l=U>0;return{enabled:l,resultHistory:b,addResultHistory:r=>{if(l){const n={link:j(r),display:r.display};"header"in r&&(n.header=r.header),b.value=[n,...b.value.slice(0,U-1)]}},removeResultHistory:r=>{b.value=[...b.value.slice(0,r),...b.value.slice(r+1)]}}},Ce=l=>{const r=de(),n=z(),Q=me(),s=_(0),w=x(()=>s.value>0),h=he([]);return ve(()=>{const{search:v,terminate:C}=ye(),k=pe(u=>{const f=u.join(" "),{searchFilter:S=m=>m,splitWord:D,suggestionsFilter:F,...y}=r.value;f?(s.value+=1,v(u.join(" "),n.value,y).then(m=>S(m,f,n.value,Q.value)).then(m=>{s.value-=1,h.value=m}).catch(m=>{console.warn(m),s.value-=1,s.value||(h.value=[])})):h.value=[]},q.searchDelay-q.suggestDelay);B([l,n],([u])=>k(u),{immediate:!0}),be(()=>{C()})}),{isSearching:w,results:h}};var De=te({name:"SearchResult",props:{queries:{type:Array,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(l,{emit:r}){const n=ae(),Q=z(),s=le(re),{enabled:w,addQueryHistory:h,queryHistory:v,removeQueryHistory:C}=xe(),{enabled:k,resultHistory:u,addResultHistory:f,removeResultHistory:S}=Qe(),D=w||k,F=ne(l,"queries"),{results:y,isSearching:m}=Ce(F),o=oe({isQuery:!0,index:0}),g=_(0),d=_(0),P=x(()=>D&&(v.value.length>0||u.value.length>0)),L=x(()=>y.value.length>0),A=x(()=>y.value[g.value]||null),M=()=>{const{isQuery:e,index:t}=o;t===0?(o.isQuery=!e,o.index=e?u.value.length-1:v.value.length-1):o.index=t-1},G=()=>{const{isQuery:e,index:t}=o;t===(e?v.value.length-1:u.value.length-1)?(o.isQuery=!e,o.index=0):o.index=t+1},J=()=>{g.value=g.value>0?g.value-1:y.value.length-1,d.value=A.value.contents.length-1},K=()=>{g.value=g.value<y.value.length-1?g.value+1:0,d.value=0},V=()=>{d.value<A.value.contents.length-1?d.value+=1:K()},N=()=>{d.value>0?d.value-=1:J()},E=e=>e.map(t=>we(t)?t:a(t[0],t[1])),W=e=>{if(e.type==="customField"){const t=ke[e.index]||"$content",[c,R=""]=fe(t)?t[Q.value].split("$content"):t.split("$content");return e.display.map(i=>a("div",E([c,...i,R])))}return e.display.map(t=>a("div",E(t)))},H=()=>{g.value=0,d.value=0,r("updateQuery",""),r("close")},X=()=>w?a("ul",{class:"search-pro-result-list"},a("li",{class:"search-pro-result-list-item"},[a("div",{class:"search-pro-result-title"},s.value.queryHistory),v.value.map((e,t)=>a("div",{class:["search-pro-result-item",{active:o.isQuery&&o.index===t}],onClick:()=>{r("updateQuery",e)}},[a($,{class:"search-pro-result-type"}),a("div",{class:"search-pro-result-content"},e),a("button",{class:"search-pro-remove-icon",innerHTML:I,onClick:c=>{c.preventDefault(),c.stopPropagation(),C(t)}})]))])):null,Z=()=>k?a("ul",{class:"search-pro-result-list"},a("li",{class:"search-pro-result-list-item"},[a("div",{class:"search-pro-result-title"},s.value.resultHistory),u.value.map((e,t)=>a(T,{to:e.link,class:["search-pro-result-item",{active:!o.isQuery&&o.index===t}],onClick:()=>{H()}},()=>[a($,{class:"search-pro-result-type"}),a("div",{class:"search-pro-result-content"},[e.header?a("div",{class:"content-header"},e.header):null,a("div",e.display.map(c=>E(c)).flat())]),a("button",{class:"search-pro-remove-icon",innerHTML:I,onClick:c=>{c.preventDefault(),c.stopPropagation(),S(t)}})]))])):null;return se("keydown",e=>{if(l.isFocusing){if(L.value){if(e.key==="ArrowUp")N();else if(e.key==="ArrowDown")V();else if(e.key==="Enter"){const t=A.value.contents[d.value];h(l.queries.join(" ")),f(t),n.push(j(t)),H()}}else if(k){if(e.key==="ArrowUp")M();else if(e.key==="ArrowDown")G();else if(e.key==="Enter"){const{index:t}=o;o.isQuery?(r("updateQuery",v.value[t]),e.preventDefault()):(n.push(u.value[t].link),H())}}}}),B([g,d],()=>{var e;(e=document.querySelector(".search-pro-result-list-item.active .search-pro-result-item.active"))==null||e.scrollIntoView(!1)},{flush:"post"}),()=>a("div",{class:["search-pro-result-wrapper",{empty:l.queries.length?!L.value:!P.value}],id:"search-pro-results"},l.queries.length?m.value?a(ce,{hint:s.value.searching}):L.value?a("ul",{class:"search-pro-result-list"},y.value.map(({title:e,contents:t},c)=>{const R=g.value===c;return a("li",{class:["search-pro-result-list-item",{active:R}]},[a("div",{class:"search-pro-result-title"},e||s.value.defaultTitle),t.map((i,ee)=>{const O=R&&d.value===ee;return a(T,{to:j(i),class:["search-pro-result-item",{active:O,"aria-selected":O}],onClick:()=>{h(l.queries.join(" ")),f(i),H()}},()=>[i.type==="text"?null:a(i.type==="title"?ie:i.type==="heading"?ue:ge,{class:"search-pro-result-type"}),a("div",{class:"search-pro-result-content"},[i.type==="text"&&i.header?a("div",{class:"content-header"},i.header):null,a("div",W(i))])])})])})):s.value.emptyResult:D?P.value?[X(),Z()]:s.value.emptyHistory:s.value.emptyResult)}});export{De as default};
